CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `activity_recent` AS select `account`.`accountName` AS `accountName`,`client`.`clientName` AS `clientName`,'user' AS `type`,`auth_user`.`username` AS `entity`,`auth_user`.`date_joined` AS `date` from (((`account` join `client` on((`account`.`accountID` = `client`.`accountID`))) join `users` on((`users`.`clientID` = `client`.`clientID`))) join `auth_user` on((`auth_user`.`id` = `users`.`id`))) where (`account`.`accountID` > 64) union select `account`.`accountName` AS `accountName`,`client`.`clientName` AS `clientName`,'organisation' AS `type`,`organisation`.`organisationName` AS `entity`,`organisation`.`createdDate` AS `date` from (((`account` join `client` on((`account`.`accountID` = `client`.`accountID`))) join `users` on((`users`.`clientID` = `client`.`clientID`))) join `organisation` on((`organisation`.`clientID` = `client`.`clientID`))) where (`account`.`accountID` > 64) union select `account`.`accountName` AS `accountName`,`client`.`clientName` AS `clientName`,'project' AS `type`,`project`.`projectName` AS `entity`,`project`.`createdDate` AS `date` from ((`account` join `client` on((`account`.`accountID` = `client`.`accountID`))) join `project` on((`project`.`clientID` = `client`.`clientID`))) where (`account`.`accountID` > 64) union select `account`.`accountName` AS `accountName`,`client`.`clientName` AS `clientName`,'problem' AS `type`,`problem`.`problemHeader` AS `entity`,`problem`.`createdDate` AS `date` from ((`account` join `client` on((`account`.`accountID` = `client`.`accountID`))) join `problem` on((`problem`.`clientID` = `client`.`clientID`))) where (`account`.`accountID` > 64) union select `account`.`accountName` AS `accountName`,`client`.`clientName` AS `clientName`,'tasklist' AS `type`,`tasklist`.`taskListName` AS `entity`,`tasklist`.`createdDate` AS `date` from ((`account` join `client` on((`account`.`accountID` = `client`.`accountID`))) join `tasklist` on((`tasklist`.`clientID` = `client`.`clientID`))) where (`account`.`accountID` > 64) union select `account`.`accountName` AS `accountName`,`client`.`clientName` AS `clientName`,'task' AS `type`,`task`.`taskName` AS `entity`,`task`.`createdDate` AS `date` from ((`account` join `client` on((`account`.`accountID` = `client`.`accountID`))) join `task` on((`task`.`clientID` = `client`.`clientID`))) where (`account`.`accountID` > 64) union select `account`.`accountName` AS `accountName`,`client`.`clientName` AS `clientName`,'task_archive' AS `type`,`task_archive`.`taskName` AS `entity`,`task_archive`.`createdDate` AS `date` from ((`account` join `client` on((`account`.`accountID` = `client`.`accountID`))) join `task_archive` on((`task_archive`.`clientID` = `client`.`clientID`))) where (`account`.`accountID` > 64) union select `account`.`accountName` AS `accountName`,`client`.`clientName` AS `clientName`,'board' AS `type`,`users`.`username` AS `entity`,NULL AS `date` from (((`account` join `client` on((`account`.`accountID` = `client`.`accountID`))) join `users` on((`users`.`clientID` = `client`.`clientID`))) join `board` on((`board`.`userID` = `users`.`id`))) where (`account`.`accountID` > 64) order by `accountName`,`clientName`,`date`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_account_detail` AS select `acc`.`accountID` AS `accountid`,`acc`.`accountName` AS `accountName`,`acc`.`authenticationID` AS `authenticationID`,`cli`.`clientID` AS `clientID`,`acc`.`accountID` AS `id` from (`account` `acc` join `client` `cli` on((`acc`.`accountID` = `cli`.`accountID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_actual_problem_links` AS select `problemlink`.`problemID` AS `problemID`,`problemlink`.`problemLinkID` AS `problemLinkID`,`problemlink`.`problemLinkType` AS `problemLinkType`,`problemlink`.`createdDate` AS `createdDate`,`problemlink`.`createdBy` AS `createdBy`,`problemlink`.`deletedDate` AS `deletedDate`,`problemlink`.`deletedBy` AS `deletedBy`,`problem`.`problemHeader` AS `problemLinkName`,`problemlink`.`problemID` AS `id` from (`problemlink` join `problem` on((`problemlink`.`problemLinkID` = `problem`.`problemID`))) where ((`problemlink`.`problemLinkType` = 2) and isnull(`problemlink`.`deletedDate`)) union select `problemlink`.`problemID` AS `problemID`,`problemlink`.`problemLinkID` AS `problemLinkID`,`problemlink`.`problemLinkType` AS `problemLinkType`,`problemlink`.`createdDate` AS `createdDate`,`problemlink`.`createdBy` AS `createdBy`,`problemlink`.`deletedDate` AS `deletedDate`,`problemlink`.`deletedBy` AS `deletedBy`,`project`.`projectName` AS `problemLinkName`,`problemlink`.`problemID` AS `id` from (`problemlink` join `project` on((`problemlink`.`problemLinkID` = `project`.`projectID`))) where ((`problemlink`.`problemLinkType` = 1) and isnull(`problemlink`.`deletedDate`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_board` AS select `brd`.`id` AS `id`,`brd`.`userID` AS `userID`,`brd`.`itemID` AS `itemID`,`brd`.`itemType` AS `itemType`,`brd`.`columnNo` AS `columnNo`,`brd`.`itemOrder` AS `itemOrder`,`tsk`.`taskName` AS `description` from (`board` `brd` left join `task` `tsk` on((`brd`.`itemID` = `tsk`.`taskID`))) where (isnull(`tsk`.`deletedDate`) and (`tsk`.`taskStatusID` not in (7,8,9)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_board_queue` AS select `tsk`.`taskID` AS `id`,`tsk`.`taskName` AS `description`,`tsk`.`assignedTo` AS `assignedTo`,1 AS `type` from ((`project` `prj` join `tasklist` `tkl` on((`prj`.`projectID` = `tkl`.`taskListID`))) join `task` `tsk` on((`tkl`.`taskListID` = `tsk`.`taskListID`))) where (isnull(`tsk`.`deletedDate`) and (`tsk`.`taskStatusID` not in (7,8,9)) and (not(`tsk`.`taskID` in (select `board`.`itemID` from `board` where ((`board`.`itemType` = 1) and (`board`.`columnNo` <> 1)))))) union select `prb`.`problemID` AS `id`,`prb`.`problemHeader` AS `description`,`prb`.`assignedTo` AS `assignedTo`,2 AS `type` from `problem` `prb` where (isnull(`prb`.`deletedDate`) and (`prb`.`problemStatusID` <> 4) and (not(`prb`.`problemID` in (select `board`.`itemID` from `board` where ((`board`.`itemType` = 2) and (`board`.`columnNo` <> 1))))));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_chart_project_behind_tasks` AS select `prj`.`projectID` AS `projectID`,`lk`.`lookupValueChar` AS `status`,count(`tsk`.`taskID`) AS `countTasks`,`tsk`.`deletedDate` AS `deletedDate`,`tsk`.`taskStartDate` AS `taskStartDate`,`tsk`.`taskTimeEstimate` AS `taskTimeEstimate`,`tsk`.`taskID` AS `id` from (((`project` `prj` left join `tasklist` `tsl` on((`prj`.`projectID` = `tsl`.`projectID`))) left join `task` `tsk` on((`tsk`.`taskListID` = `tsl`.`taskListID`))) left join `lookup` `lk` on((`lk`.`lookupValueNum` = `tsk`.`taskStatusID`))) where ((`lk`.`lookupTypeID` = 21) and ((`tsk`.`taskStartDate` + interval `tsk`.`taskTimeEstimate` day) < now()) and (`tsk`.`taskStatusID` not in (7,8,9))) group by `prj`.`projectID`,`lk`.`lookupValueChar`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_chart_tasks_by_status` AS select `prj`.`projectID` AS `projectID`,`lk`.`lookupValueChar` AS `status`,count(`tsk`.`taskID`) AS `countTasks`,`tsk`.`deletedDate` AS `deletedDate`,`tsk`.`taskID` AS `id` from (((`project` `prj` left join `tasklist` `tsl` on((`prj`.`projectID` = `tsl`.`projectID`))) left join `task` `tsk` on((`tsk`.`taskListID` = `tsl`.`taskListID`))) left join `lookup` `lk` on((`lk`.`lookupValueNum` = `tsk`.`taskStatusID`))) where (`lk`.`lookupTypeID` = 21) group by `prj`.`projectID`,`lk`.`lookupValueChar`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_client_admin_group` AS select `groups`.`id` AS `groupID`,`groups`.`id` AS `id` from `groups` where (`groups`.`name` = 'clientAdmin');

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_client_users` AS select `org`.`clientID` AS `clientID`,`org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`usr`.`id` AS `userID`,`org`.`clientID` AS `id` from ((`userorganisation` `uorg` join `users` `usr` on((`uorg`.`organisationID` = `usr`.`company`))) join `organisation` `org` on((`org`.`organisationID` = `uorg`.`organisationID`))) where (isnull(`uorg`.`deletedDate`) and isnull(`org`.`deletedDate`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_comments_parent` AS select `usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`com`.`commentID` AS `commentID`,`com`.`parentID` AS `parentID`,`com`.`parentTypeID` AS `parentTypeID`,`com`.`commentTypeID` AS `commentTypeID`,`com`.`commentText` AS `commentText`,date_format(`com`.`createdDate`,'%a %D %M %Y %l:%i %p') AS `createdDate`,`com`.`createdBy` AS `createdBy`,`lk`.`lookupValueChar` AS `lookupValueChar`,`doc`.`documentFileName` AS `documentFileName`,`doc`.`documentName` AS `documentName`,`doc`.`documentTitle` AS `documenttitle`,`doc`.`documentTypeID` AS `documentTypeID`,`com`.`commentID` AS `id` from (((`comment` `com` join `lookup` `lk` on((`lk`.`lookupValueNum` = `com`.`commentTypeID`))) join `users` `usr` on((`com`.`createdBy` = `usr`.`id`))) left join `document` `doc` on(((`doc`.`documentParentID` = `com`.`commentID`) and (`doc`.`documentTypeID` = 2)))) where (`lk`.`lookupTypeID` = 6);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_importances` AS select `lookup`.`lookupValueNum` AS `importanceID`,`lookup`.`lookupValueChar` AS `importanceName`,`lookup`.`lookupValueNum` AS `id` from `lookup` where ((`lookup`.`lookupTypeID` = 19) and isnull(`lookup`.`deletedDate`));

CREATE ALGORITHM=UNDEFINED DEFINER=`admin`@`localhost` SQL SECURITY DEFINER VIEW `v_interactions` AS select `lk`.`id` AS `id`,`intr`.`interactionID` AS `interactionID`,`intr`.`clientID` AS `clientID`,`intr`.`details` AS `details`,date_format(`intr`.`createdDate`,'%Y %b %d') AS `createdDate`,`intr`.`createdBy` AS `createdBy`,`intr`.`updatedDate` AS `updatedDate`,`intr`.`updatedBy` AS `updatedBy`,`intr`.`deletedDate` AS `deletedDate`,`intr`.`deletedBy` AS `deletedBy`,`lk`.`lookupValueChar` AS `interactiontype` from (`simpris_live`.`interaction` `intr` join `simpris_live`.`lookup` `lk` on((`intr`.`interactionTypeID` = `lk`.`lookupSubTypeID`))) where (`lk`.`lookupTypeID` = 22);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_invoice_detail` AS select `inv`.`invoiceID` AS `invoiceID`,`inv`.`userID` AS `userID`,`inv`.`statusID` AS `statusID`,`inv`.`supersededBy` AS `supersededBy`,`inv`.`createdDate` AS `createdDate`,`inv`.`createdBy` AS `createdBy`,`inv`.`description` AS `description`,`inv`.`comments` AS `comments`,`inv`.`clientID` AS `clientID`,`invl`.`lineNo` AS `lineNo`,`invl`.`taskID` AS `taskID`,`invl`.`itemDescription` AS `itemDescription`,`invl`.`tax1Rate` AS `tax1Rate`,`invl`.`tax2Rate` AS `tax2Rate`,`invl`.`tax3Rate` AS `tax3Rate`,`invl`.`hourlyRate` AS `hourlyRate`,`invl`.`noHours` AS `noHours`,`invl`.`agreedRate` AS `agreedRate`,`invl`.`tax1` AS `tax1`,`invl`.`tax2` AS `tax2`,`invl`.`tax3` AS `tax3`,`invl`.`grossTotal` AS `grossTotal`,`invl`.`netTotal` AS `netTotal`,`inv`.`invoiceID` AS `id` from (`invoice` `inv` join `invoiceline` `invl` on((`inv`.`invoiceID` = `invl`.`invoiceID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_lookups_by_type` AS select `lookup`.`clientID` AS `clientID`,`lookup`.`lookupTypeID` AS `lookupTypeID`,`lookup`.`lookupSubTypeID` AS `lookupSubTypeID`,`lookup`.`lookupOrder` AS `lookupOrder`,`lookup`.`lookupValueNum` AS `lookupValueNum`,`lookup`.`lookupValueChar` AS `lookupValueChar`,`lookup`.`lookupDescription` AS `lookupDescription`,`lookup`.`createdDate` AS `createdDate`,`lookup`.`createdBy` AS `createdBy`,`lookup`.`updatedDate` AS `updatedDate`,`lookup`.`updatedBy` AS `updatedBy`,`lookup`.`deletedDate` AS `deletedDate`,`lookup`.`deletedBy` AS `deletedBy`,`lookup`.`lookupTypeID` AS `id` from `lookup` where isnull(`lookup`.`deletedDate`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_assignedprojects` AS select `pr`.`projectID` AS `projectID`,`pr`.`projectName` AS `projectName`,`pr`.`projectDescription` AS `projectDescription`,`pr`.`deletedDate` AS `deletedDate`,`up`.`userID` AS `userID`,`pr`.`updatedDate` AS `updatedDate`,`pr`.`projectID` AS `id` from (`project` `pr` join `userproject` `up` on((`pr`.`projectID` = `up`.`projectID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_attention_required` AS select distinct 'Task' AS `type`,2 AS `ordercol`,`pr`.`projectName` AS `projectName`,`pr`.`projectID` AS `projectID`,`tk`.`taskDescription` AS `taskDescription`,`tk`.`taskID` AS `itemID`,`tk`.`assignedTo` AS `assignedTo`,`pr`.`organisationID` AS `organisationID`,`tk`.`deletedDate` AS `deletedDate`,`upr`.`userID` AS `userID`,`pr`.`projectID` AS `id` from (((`project` `pr` join `tasklist` `tl` on((`pr`.`projectID` = `tl`.`projectID`))) join `task` `tk` on((`tl`.`taskListID` = `tk`.`taskListID`))) join `userproject` `upr` on((`upr`.`projectID` = `pr`.`projectID`))) where ((`tk`.`taskPriorityID` = 2) and isnull(`tk`.`deletedDate`)) union select distinct 'Problem' AS `type`,2 AS `ordercol`,`prb`.`problemHeader` AS `problemHeader`,`prb`.`problemID` AS `problemID`,NULL AS `taskDescription`,`prb`.`problemID` AS `itemID`,`prb`.`assignedTo` AS `assignedTo`,`prb`.`organisationID` AS `organisationID`,`prb`.`deletedDate` AS `deletedDate`,NULL AS `userID`,`prb`.`problemID` AS `id` from `problem` `prb` where ((`prb`.`problemPriorityID` = 2) and isnull(`prb`.`deletedDate`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_client` AS select `cl`.`clientID` AS `clientID`,`usr`.`id` AS `user_id`,`org`.`deletedDate` AS `deletedDate`,`cl`.`clientID` AS `id` from ((`client` `cl` join `organisation` `org` on((`cl`.`clientID` = `org`.`clientID`))) join `users` `usr` on((`org`.`organisationID` = `usr`.`company`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_critical_work` AS select distinct 'Task' AS `type`,1 AS `ordercol`,`pr`.`projectName` AS `projectName`,`pr`.`projectID` AS `projectID`,`tk`.`taskName` AS `taskDescription`,`tk`.`taskID` AS `itemID`,`tk`.`assignedTo` AS `assignedTo`,`pr`.`organisationID` AS `organisationID`,`tk`.`deletedDate` AS `deletedDate`,`pr`.`projectID` AS `id`,`pr`.`clientID` AS `clientID` from (((`project` `pr` join `tasklist` `tl` on((`pr`.`projectID` = `tl`.`projectID`))) join `task` `tk` on((`tl`.`taskListID` = `tk`.`taskListID`))) join `userproject` `upr` on((`upr`.`projectID` = `pr`.`projectID`))) where ((`tk`.`taskPriorityID` = 1) and (`tk`.`taskStatusID` in (1,2,3,4,5,6,19)) and isnull(`tk`.`deletedDate`)) union select distinct 'Problem' AS `type`,1 AS `ordercol`,`prb`.`problemHeader` AS `problemHeader`,`prb`.`problemID` AS `problemID`,`prb`.`problemDescription` AS `problemDescription`,`prb`.`problemID` AS `itemID`,`prb`.`assignedTo` AS `assignedTo`,`prb`.`organisationID` AS `organisationID`,`prb`.`deletedDate` AS `deletedDate`,`prb`.`problemID` AS `id`,`prb`.`clientID` AS `clientID` from `problem` `prb` where ((`prb`.`problemPriorityID` = 1) and isnull(`prb`.`deletedDate`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_important_work` AS select distinct `pr`.`projectName` AS `projectName`,`pr`.`projectID` AS `projectID`,`tk`.`taskName` AS `taskDescription`,`tk`.`taskID` AS `taskID`,`tk`.`assignedTo` AS `assignedTo`,`pr`.`organisationID` AS `organisationID`,`tk`.`deletedDate` AS `deletedDate`,`upr`.`userID` AS `userID`,`pr`.`projectID` AS `id` from (((`project` `pr` join `tasklist` `tl` on((`pr`.`projectID` = `tl`.`projectID`))) join `task` `tk` on((`tl`.`taskListID` = `tk`.`taskListID`))) join `userproject` `upr` on((`upr`.`projectID` = `pr`.`projectID`))) where (`tk`.`taskPriorityID` = 1) union select distinct `prb`.`problemHeader` AS `problemHeader`,`prb`.`problemID` AS `problemID`,`prb`.`problemDescription` AS `problemDescription`,NULL AS `taskID`,`prb`.`assignedTo` AS `assignedTo`,`prb`.`organisationID` AS `organisationID`,`prb`.`deletedDate` AS `deletedDate`,NULL AS `userID`,`prb`.`problemID` AS `id` from `problem` `prb` where (`prb`.`problemPriorityID` = 1);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_invoice_times` AS select `pr`.`projectName` AS `projectName`,`tkl`.`taskListName` AS `taskListName`,`tsk`.`taskDescription` AS `taskDescription`,date_format(`tm`.`timeDay`,'%e %b %Y') AS `timeDay`,`tm`.`hours` AS `hours`,`tm`.`userID` AS `userID`,`tm`.`timeID` AS `timeID`,`tm`.`deletedDate` AS `deletedDate`,`tm`.`timeID` AS `id` from (((`time` `tm` join `task` `tsk` on((`tm`.`taskID` = `tsk`.`taskID`))) join `tasklist` `tkl` on((`tkl`.`taskListID` = `tsk`.`taskListID`))) join `project` `pr` on((`pr`.`projectID` = `tkl`.`projectID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_invoices` AS select `inv`.`invoiceID` AS `invoiceID`,`inv`.`statusID` AS `statusID`,`lk`.`lookupValueChar` AS `lookupValueChar`,`inv`.`createdDate` AS `createdDate`,date_format(`inv`.`createdDate`,'%d %b %Y') AS `createdDateF`,sum(`invl`.`noHours`) AS `noHours`,sum(`invl`.`grossTotal`) AS `grossTotal`,sum(`invl`.`netTotal`) AS `netTotal`,`inv`.`userID` AS `userID`,`inv`.`deletedDate` AS `deletedDate`,`inv`.`invoiceID` AS `id`,`inv`.`clientID` AS `clientID` from ((`invoice` `inv` join `invoiceline` `invl` on((`inv`.`invoiceID` = `invl`.`invoiceID`))) left join `lookup` `lk` on((`lk`.`lookupSubTypeID` = `inv`.`statusID`))) where (`lk`.`lookupTypeID` = 18) group by `inv`.`invoiceID`,`lk`.`lookupValueChar`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_items` AS select `upr`.`projectID` AS `projectID`,`upr`.`userID` AS `userID` from `userproject` `upr` union select `uor`.`organisationID` AS `organisationID`,`uor`.`userID` AS `userID` from `userorganisation` `uor` union select `tsk`.`taskID` AS `taskID`,`tsk`.`assignedTo` AS `assignedTo` from `task` `tsk` union select `usr`.`company` AS `mainOrganisationID`,`usr`.`id` AS `user_id` from `users` `usr`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_org_tasks` AS select distinct `upr`.`userID` AS `userID`,concat(`prj`.`projectName`,' - ',`tsk`.`taskName`) AS `taskName`,`tsk`.`taskID` AS `taskID`,`tsk`.`deletedDate` AS `deletedDate`,`tsk`.`taskID` AS `id` from (((`task` `tsk` join `tasklist` `tkl`) join `project` `prj`) join `userproject` `upr`) where ((`upr`.`projectID` = `prj`.`projectID`) and (`prj`.`projectID` = `tkl`.`projectID`) and (`tsk`.`taskListID` = `tkl`.`taskListID`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_organisation_events` AS select `org`.`organisationName` AS `organisationName`,`org`.`createdDate` AS `createdDate`,`cl`.`userID` AS `userID`,`org`.`organisationID` AS `organisationID`,3 AS `type` from (`organisation` `org` join `client` `cl` on((`org`.`clientID` = `cl`.`clientID`))) where (`org`.`createdDate` > `fn_past_date`(-(10))) union select `org`.`organisationName` AS `organisationName`,`org`.`updatedDate` AS `updatedDate`,`cl`.`userID` AS `userID`,`org`.`organisationID` AS `organisationID`,5 AS `type` from (`organisation` `org` join `client` `cl` on((`org`.`clientID` = `cl`.`clientID`))) where (`org`.`updatedDate` > `fn_past_date`(-(10))) union select `org`.`organisationName` AS `organisationName`,`org`.`createdDate` AS `createdDate`,`cl`.`userID` AS `userID`,`org`.`organisationID` AS `organisationID`,7 AS `type` from (`organisation` `org` join `client` `cl` on((`org`.`clientID` = `cl`.`clientID`))) where (`org`.`updatedDate` > `fn_past_date`(-(10)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_organisations` AS select `cl`.`clientID` AS `clientID`,`org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`uo`.`userID` AS `userID`,`org`.`deletedDate` AS `deletedDate`,`cl`.`clientID` AS `id` from ((`organisation` `org` left join `userorganisation` `uo` on((`org`.`organisationID` = `uo`.`organisationID`))) join `client` `cl` on((`cl`.`clientID` = `org`.`clientID`))) union select `cl`.`clientID` AS `clientID`,`org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`usr`.`id` AS `userID`,`org`.`deletedDate` AS `deletedDate`,`cl`.`clientID` AS `id` from ((`organisation` `org` left join `users` `usr` on((`org`.`organisationID` = `usr`.`company`))) join `client` `cl` on((`cl`.`clientID` = `org`.`clientID`))) union select `cl`.`clientID` AS `clientID`,`org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`usr`.`id` AS `userID`,`org`.`deletedDate` AS `deletedDate`,`cl`.`clientID` AS `id` from ((`organisation` `org` left join `users` `usr` on((`org`.`createdBy` = `usr`.`id`))) join `client` `cl` on((`cl`.`clientID` = `org`.`clientID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_priorities` AS select `lookup`.`clientID` AS `clientID`,`lookup`.`lookupDescription` AS `lookupDescription`,`lookup`.`lookupValueNum` AS `lookupValueNum`,`lookup`.`lookupValueChar` AS `lookupValueChar`,`lookup`.`lookupOrder` AS `lookupOrder`,`lookup`.`lookupValueNum` AS `id` from `lookup` where (`lookup`.`lookupTypeID` = 4);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_problem_priorities` AS select `lookup`.`clientID` AS `clientID`,`lookup`.`lookupTypeID` AS `lookupTypeID`,`lookup`.`lookupSubTypeID` AS `lookupSubTypeID`,`lookup`.`lookupOrder` AS `lookupOrder`,`lookup`.`lookupValueNum` AS `lookupValueNum`,`lookup`.`lookupValueChar` AS `lookupValueChar`,`lookup`.`lookupDescription` AS `lookupDescription`,`lookup`.`createdDate` AS `createdDate`,`lookup`.`createdBy` AS `createdBy`,`lookup`.`updatedDate` AS `updatedDate`,`lookup`.`updatedBy` AS `updatedBy`,`lookup`.`deletedDate` AS `deletedDate`,`lookup`.`deletedBy` AS `deletedBy`,`lookup`.`lookupTypeID` AS `id` from `lookup` where (`lookup`.`lookupTypeID` = 12);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_problem_scope` AS select `lookup`.`clientID` AS `clientID`,`lookup`.`lookupTypeID` AS `lookupTypeID`,`lookup`.`lookupSubTypeID` AS `lookupSubTypeID`,`lookup`.`lookupOrder` AS `lookupOrder`,`lookup`.`lookupValueNum` AS `lookupValueNum`,`lookup`.`lookupValueChar` AS `lookupValueChar`,`lookup`.`lookupDescription` AS `lookupDescription`,`lookup`.`createdDate` AS `createdDate`,`lookup`.`createdBy` AS `createdBy`,`lookup`.`updatedDate` AS `updatedDate`,`lookup`.`updatedBy` AS `updatedBy`,`lookup`.`deletedDate` AS `deletedDate`,`lookup`.`deletedBy` AS `deletedBy`,`lookup`.`lookupTypeID` AS `id` from `lookup` where (`lookup`.`lookupTypeID` = 10);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_problem_statuses` AS select `lookup`.`clientID` AS `clientID`,`lookup`.`lookupTypeID` AS `lookupTypeID`,`lookup`.`lookupSubTypeID` AS `lookupSubTypeID`,`lookup`.`lookupOrder` AS `lookupOrder`,`lookup`.`lookupValueNum` AS `lookupValueNum`,`lookup`.`lookupValueChar` AS `lookupValueChar`,`lookup`.`lookupDescription` AS `lookupDescription`,`lookup`.`createdDate` AS `createdDate`,`lookup`.`createdBy` AS `createdBy`,`lookup`.`updatedDate` AS `updatedDate`,`lookup`.`updatedBy` AS `updatedBy`,`lookup`.`deletedDate` AS `deletedDate`,`lookup`.`deletedBy` AS `deletedBy`,`lookup`.`lookupTypeID` AS `id` from `lookup` where (`lookup`.`lookupTypeID` = 11);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_problems` AS select `pro`.`problemID` AS `problemID`,`pro`.`organisationID` AS `organisationID`,`lookty`.`lookupValueChar` AS `problemType`,`pro`.`problemHeader` AS `problemHeader`,`pro`.`assignedTo` AS `assignedTo`,`looksc`.`lookupValueChar` AS `problemScope`,`lookstat`.`lookupValueChar` AS `problemStatus`,`lookpr`.`lookupValueChar` AS `problemPriority`,`looksc`.`lookupValueNum` AS `problemScopeID`,`pro`.`createdBy` AS `createdBy`,`pro`.`problemID` AS `id`,coalesce(`usr`.`first_name`,' ') AS `first_name`,coalesce(`usr`.`last_name`,' ') AS `last_name`,`pro`.`clientID` AS `clientID`,`pro`.`queueID` AS `queueid` from (((((`problem` `pro` left join `lookup` `lookty` on((`pro`.`problemTypeID` = `lookty`.`lookupSubTypeID`))) left join `lookup` `looksc` on((`pro`.`scope` = `looksc`.`lookupSubTypeID`))) left join `lookup` `lookstat` on((`pro`.`problemStatusID` = `lookstat`.`lookupSubTypeID`))) left join `lookup` `lookpr` on((`pro`.`problemPriorityID` = `lookpr`.`lookupSubTypeID`))) left join `users` `usr` on((`usr`.`id` = `pro`.`assignedTo`))) where ((`lookty`.`lookupTypeID` = 8) and (`looksc`.`lookupTypeID` = 10) and (`lookstat`.`lookupTypeID` = 11) and (`lookpr`.`lookupTypeID` = 12) and isnull(`pro`.`deletedBy`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_projects` AS select `project`.`projectID` AS `projectID`,`project`.`organisationID` AS `organisationID`,`project`.`projectName` AS `projectName`,`project`.`projectDescription` AS `projectDescription`,`project`.`createdDate` AS `createdDate`,`project`.`createdBy` AS `createdBy`,`project`.`updatedDate` AS `updatedDate`,`project`.`updatedBy` AS `updatedBy`,`project`.`deletedDate` AS `deletedDate`,`project`.`deletedBy` AS `deletedBy`,`userproject`.`userID` AS `userID`,`organisation`.`organisationName` AS `organisationName`,`project`.`projectID` AS `id`,`project`.`clientID` AS `clientID` from ((`project` join `userproject` on((`project`.`projectID` = `userproject`.`projectID`))) join `organisation` on((`project`.`organisationID` = `organisation`.`organisationID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_reports` AS select `lk`.`lookupValueNum` AS `lookupValueNum`,`lk`.`lookupValueChar` AS `lookupValueChar`,`usrr`.`userID` AS `userID`,`usrr`.`deletedDate` AS `deletedDate` from (`userreport` `usrr` join `lookup` `lk` on((`usrr`.`reportID` = `lk`.`lookupValueNum`))) where (isnull(`lk`.`deletedDate`) and (`lk`.`lookupTypeID` = 15));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_statuses` AS select `lookup`.`clientID` AS `clientID`,`lookup`.`lookupDescription` AS `lookupDescription`,`lookup`.`lookupValueNum` AS `lookupValueNum`,`lookup`.`lookupValueChar` AS `lookupValueChar` from `lookup` where (`lookup`.`lookupTypeID` = 3);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_tasks` AS select `project`.`projectID` AS `projectID`,`project`.`projectName` AS `projectName`,`tasklist`.`taskListID` AS `taskListID`,`tasklist`.`taskListName` AS `taskListName`,`task`.`taskID` AS `taskID`,`task`.`taskName` AS `taskName`,`task`.`taskDescription` AS `taskDescription`,`task`.`assignedTo` AS `assignedTo`,`task`.`deletedDate` AS `deletedDate`,`task`.`taskID` AS `id`,`task`.`clientID` AS `clientID`,`task`.`taskStatusID` AS `taskStatusID`,`task`.`taskPriorityID` AS `taskPriorityID` from ((`task` join `tasklist` on((`task`.`taskListID` = `tasklist`.`taskListID`))) join `project` on((`project`.`projectID` = `tasklist`.`projectID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_tasktypes` AS select `lookup`.`clientID` AS `clientID`,`lookup`.`lookupDescription` AS `lookupDescription`,`lookup`.`lookupValueNum` AS `lookupValueNum`,`lookup`.`lookupValueChar` AS `lookupValueChar`,`lookup`.`lookupSubTypeID` AS `id` from `lookup` where (`lookup`.`lookupTypeID` = 5);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_time` AS select `time`.`timeID` AS `timeID`,date_format(`time`.`timeDay`,'%Y %b %d') AS `timeDay`,`time`.`timeDay` AS `timeDayraw`,`time`.`hours` AS `hours`,`time`.`taskID` AS `taskID`,`time`.`timeTypeID` AS `timeTypeID`,`time`.`userID` AS `userID`,`users`.`first_name` AS `first_name`,`users`.`last_name` AS `last_name`,`time`.`deletedDate` AS `deletedDate`,`time`.`comments` AS `comments`,`task`.`taskDescription` AS `taskDescription`,`lookup`.`lookupValueChar` AS `lookupValueChar`,`time`.`timeID` AS `id`,`time`.`clientID` AS `clientID` from (((`time` join `users` on((`time`.`userID` = `users`.`id`))) join `task` on((`time`.`taskID` = `task`.`taskID`))) join `lookup` on((`time`.`timeTypeID` = `lookup`.`lookupValueNum`))) where (`lookup`.`lookupTypeID` = 13);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_timesheet` AS select `time`.`timeID` AS `timeID`,`time`.`timeDay` AS `timeday`,date_format(`time`.`timeDay`,'%e %b %Y') AS `timeDayF`,`task`.`taskName` AS `taskName`,`task`.`taskDescription` AS `taskDescription`,sum(`time`.`hours`) AS `hours`,`users`.`id` AS `userID`,`time`.`timeTypeID` AS `timetypeID`,`lookup`.`lookupTypeID` AS `lookupTypeID`,`time`.`timeID` AS `id` from (((`time` join `users` on((`time`.`userID` = `users`.`id`))) join `task` on((`time`.`taskID` = `task`.`taskID`))) join `lookup` on(((`time`.`timeTypeID` = `lookup`.`lookupValueNum`) and (`lookup`.`lookupTypeID` = 13)))) group by `users`.`id`,date_format(`time`.`timeDay`,'%Y %b %e'),`task`.`taskName`,`time`.`timeID` order by `users`.`id`,`time`.`timeDay`,`task`.`taskName`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_my_users` AS select distinct `usr`.`id` AS `user_id`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`org`.`clientID` AS `clientID`,`usr`.`active` AS `active`,concat(`usr`.`first_name`,' ',`usr`.`last_name`) AS `name`,`uo`.`userID` AS `userID`,if((`usr`.`active` = 1),'Yes','No') AS `activeDesc`,`usr`.`id` AS `id` from ((`organisation` `org` join `userorganisation` `uo` on((`org`.`organisationID` = `uo`.`organisationID`))) join `users` `usr` on((`org`.`organisationID` = `usr`.`company`))) union select distinct `usr`.`id` AS `user_id`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`org`.`clientID` AS `clientID`,`usr`.`active` AS `active`,concat(`usr`.`first_name`,' ',`usr`.`last_name`) AS `name`,`usr`.`id` AS `userID`,if((`usr`.`active` = 1),'Yes','No') AS `activeDesc`,`usr`.`id` AS `id` from (`organisation` `org` join `users` `usr` on((`org`.`organisationID` = `usr`.`company`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_new_user_emails` AS select distinct `us`.`email` AS `email`,`us`.`first_name` AS `first_name`,`us`.`last_name` AS `last_name`,`us`.`id` AS `id` from `users` `us`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_organisation_activity` AS select `usa`.`activityID` AS `activityID`,`usa`.`userID` AS `userID`,`usa`.`activityData` AS `activityData`,`pro`.`organisationID` AS `organisationID` from ((`organisation` `org` join `project` `pro` on((`org`.`organisationID` = `pro`.`organisationID`))) join `useractivity` `usa` on((`usa`.`activityType` = `pro`.`projectID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_organisation_potential_users` AS select `users`.`id` AS `id`,`users`.`first_name` AS `first_name`,`users`.`last_name` AS `last_name`,`users`.`company` AS `company`,`org`.`clientID` AS `clientID` from (`users` join `organisation` `org` on((`users`.`company` = `org`.`organisationID`))) where (`users`.`active` = 1);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_organisation_project_managers` AS select `org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`usr`.`id` AS `userID`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`proj`.`projectID` AS `projectID`,`proj`.`projectName` AS `projectName`,`usr`.`id` AS `id` from (((`userorganisation` `uorg` join `users` `usr` on((`uorg`.`organisationID` = `usr`.`company`))) join `organisation` `org` on((`org`.`organisationID` = `uorg`.`organisationID`))) join `project` `proj` on((`org`.`organisationID` = `proj`.`organisationID`))) where (isnull(`uorg`.`deletedDate`) and isnull(`org`.`deletedDate`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_organisation_project_users` AS select distinct `org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`usr`.`id` AS `userID`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`proj`.`projectID` AS `projectID`,`proj`.`projectName` AS `projectName`,`usr`.`id` AS `id` from (((`userorganisation` `uorg` join `users` `usr` on((`uorg`.`organisationID` = `usr`.`company`))) join `organisation` `org` on((`org`.`organisationID` = `uorg`.`organisationID`))) join `project` `proj` on((`org`.`organisationID` = `proj`.`organisationID`))) where (isnull(`uorg`.`deletedDate`) and isnull(`org`.`deletedDate`) and (not(`usr`.`id` in (select `upr`.`userID` from `userproject` `upr` where (`upr`.`projectID` = `proj`.`projectID`)))) and isnull(`proj`.`deletedDate`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_organisation_users` AS select `org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`usr`.`id` AS `id`,`org`.`clientID` AS `clientid`,`usr`.`company` AS `company`,`org`.`createdBy` AS `createdby`,`usr`.`id` AS `userid`,'y' AS `orgu` from (((`organisation` `org` join `userorganisation` `uorg` on((`org`.`organisationID` = `uorg`.`organisationID`))) join `users` `usr` on((`uorg`.`userID` = `usr`.`id`))) join `auth_user` `ausr` on((`usr`.`id` = `ausr`.`id`))) where (isnull(`uorg`.`deletedDate`) and isnull(`org`.`deletedDate`) and (`ausr`.`is_active` = 1)) union select `org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`ausr`.`first_name` AS `first_name`,`ausr`.`last_name` AS `last_name`,`ausr`.`id` AS `id`,`org`.`clientID` AS `clientid`,`usr`.`company` AS `company`,`org`.`createdBy` AS `createdby`,`ausr`.`id` AS `userid`,'n' AS `orgu` from ((`organisation` `org` join `users` `usr` on(((`usr`.`company` = `org`.`organisationID`) or (`usr`.`id` = `org`.`createdBy`)))) join `auth_user` `ausr` on((`ausr`.`id` = `usr`.`id`))) where ((`org`.`createdBy` = `usr`.`id`) and isnull(`org`.`deletedDate`) and (`ausr`.`is_active` = 1));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_organisations` AS select `org`.`organisationID` AS `organisationID`,`org`.`clientID` AS `clientID`,`org`.`organisationName` AS `organisationName`,`org`.`createdDate` AS `createdDate`,`org`.`createdBy` AS `createdBy`,`org`.`updatedDate` AS `updatedDate`,`org`.`updatedBy` AS `updatedBy`,`org`.`deletedDate` AS `deletedDate`,`org`.`deletedBy` AS `deletedBy`,`usr`.`company` AS `userID`,`org`.`organisationID` AS `id` from (`organisation` `org` left join `users` `usr` on((`org`.`organisationID` = `usr`.`company`))) union select `org`.`organisationID` AS `organisationID`,`org`.`clientID` AS `clientID`,`org`.`organisationName` AS `organisationName`,`org`.`createdDate` AS `createdDate`,`org`.`createdBy` AS `createdBy`,`org`.`updatedDate` AS `updatedDate`,`org`.`updatedBy` AS `updatedBy`,`org`.`deletedDate` AS `deletedDate`,`org`.`deletedBy` AS `deletedBy`,`uorg`.`userID` AS `userID`,`org`.`organisationID` AS `id` from (`organisation` `org` left join `userorganisation` `uorg` on((`org`.`organisationID` = `uorg`.`organisationID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_problem_activity` AS select `pra`.`problemID` AS `itemID`,'Update' AS `activity`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name` from (`problem_archive` `pra` join `users` `usr` on((`usr`.`id` = `pra`.`updatedBy`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_problem_assignees` AS select distinct `us`.`first_name` AS `first_name`,`us`.`last_name` AS `last_name`,`uo`.`userID` AS `userid`,`pr`.`problemID` AS `problemID`,`uo`.`userID` AS `id` from ((`userorganisation` `uo` join `users` `us` on((`us`.`id` = `uo`.`userID`))) join `problem` `pr` on((`pr`.`organisationID` = `uo`.`organisationID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_problem_edit` AS select `pro`.`clientID` AS `clientID`,`pro`.`problemID` AS `problemID`,`pro`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`pro`.`problemDescription` AS `problemDescription`,`pro`.`noOfPeopleAffected` AS `noOfPeopleAffected`,`pro`.`scope` AS `problemScopeID`,`pro`.`problemSubTypeID` AS `problemSubTypeID`,`pro`.`problemTypeID` AS `problemTypeID`,`pro`.`problemStatusID` AS `problemStatusID`,`pro`.`problemPriorityID` AS `problemPriorityID`,`pro`.`problemHeader` AS `problemHeader`,`pro`.`assignedTo` AS `assignedTo`,`pro`.`createdBy` AS `createdBy`,`pro`.`problemID` AS `id`,`pro`.`queueID` AS `queueID` from (`problem` `pro` join `organisation` `org` on((`pro`.`organisationID` = `org`.`organisationID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_problem_json` AS select concat('[',group_concat(concat('{problemHeader:\'',`problem`.`problemHeader`,'\''),concat(',problemID:\'',`problem`.`problemID`,'\'}') separator ','),']') AS `Name_exp_1` from `problem`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_problems` AS select `pro`.`clientID` AS `clientID`,`pro`.`problemID` AS `problemID`,`pro`.`organisationID` AS `organisationID`,`lookty`.`lookupDescription` AS `problemType`,`pro`.`problemDescription` AS `problemDescription`,`pro`.`noOfPeopleAffected` AS `noOfPeopleAffected`,`pro`.`scope` AS `scope`,`pro`.`problemHeader` AS `problemHeader`,`pro`.`assignedTo` AS `assignedTo`,`lookpty`.`lookupDescription` AS `lookupDescription`,`looksc`.`lookupDescription` AS `problemScope`,`lookst`.`lookupDescription` AS `problemStatus`,`lookpr`.`lookupDescription` AS `problemPriority`,`looksc`.`lookupValueNum` AS `problemScopeID`,`lookpr`.`lookupValueNum` AS `problemPriorityID`,`lookst`.`lookupValueNum` AS `problemStatusID`,`pro`.`createdBy` AS `createdBy`,date_format(`pro`.`createdDate`,'%d %b %Y') AS `createdDate`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`pro`.`problemID` AS `id`,`que`.`queueName` AS `queuename` from (((((((`problem` `pro` left join `lookup` `lookty` on(((`pro`.`problemTypeID` = `lookty`.`lookupSubTypeID`) and (`lookty`.`lookupTypeID` = 8)))) left join `lookup` `lookpty` on(((`pro`.`problemTypeID` = `lookpty`.`lookupSubTypeID`) and (`lookpty`.`lookupTypeID` = 9)))) left join `lookup` `looksc` on(((`pro`.`scope` = `looksc`.`lookupSubTypeID`) and (`looksc`.`lookupTypeID` = 10)))) left join `lookup` `lookst` on(((`pro`.`problemStatusID` = `lookst`.`lookupSubTypeID`) and (`lookst`.`lookupTypeID` = 11)))) left join `lookup` `lookpr` on(((`pro`.`problemPriorityID` = `lookpr`.`lookupSubTypeID`) and (`lookpr`.`lookupTypeID` = 12)))) left join `users` `usr` on((`pro`.`assignedTo` = `usr`.`id`))) left join `queue` `que` on((`pro`.`queueID` = `que`.`queueID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_project_activity` AS select `ac`.`activityID` AS `activityID`,`ac`.`userID` AS `userID`,`ac`.`activityType` AS `activityType`,`ac`.`activityData` AS `activityData`,`ac`.`activityDate` AS `activityDate`,`tk`.`taskID` AS `taskID`,`tk`.`taskListID` AS `taskListID`,`tk`.`taskTypeID` AS `taskTypeID`,`tk`.`taskDescription` AS `taskDescription`,`tk`.`taskStatusID` AS `taskStatusID`,`tk`.`taskPriorityID` AS `taskPriorityID`,`tk`.`assignedTo` AS `assignedTo`,`tk`.`createdDate` AS `createdDate`,`tk`.`createdBy` AS `createdBy`,`tk`.`updatedDate` AS `updatedDate`,`tk`.`updatedBy` AS `updatedBy`,`tk`.`deletedDate` AS `deletedDate`,`tk`.`deletedBy` AS `deletedBy`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name` from ((`useractivity` `ac` left join `task` `tk` on((`ac`.`activityType` = `tk`.`taskID`))) left join `users` `usr` on((`ac`.`userID` = `usr`.`id`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_project_assignees` AS select distinct `us`.`first_name` AS `first_name`,`us`.`last_name` AS `last_name`,`up`.`userID` AS `userid`,`tk`.`taskID` AS `taskID`,`up`.`userID` AS `id` from (((`userproject` `up` join `tasklist` `tl` on((`up`.`projectID` = `tl`.`projectID`))) join `task` `tk` on((`tl`.`taskListID` = `tk`.`taskListID`))) join `users` `us` on((`us`.`id` = `up`.`userID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_project_detail` AS select distinct `project`.`projectID` AS `projectID`,`project`.`organisationID` AS `organisationID`,`project`.`programmeID` AS `programmeID`,`project`.`clientID` AS `clientID`,`project`.`projectName` AS `projectName`,`project`.`projectDescription` AS `projectDescription`,`project`.`stakeholderID` AS `stakeholderID`,`project`.`projectManagerID` AS `projectManagerID`,`project`.`deliverables` AS `deliverables`,`project`.`budget` AS `budget`,`project`.`importance` AS `importance`,`project`.`createdDate` AS `createdDate`,`project`.`createdBy` AS `createdBy`,`project`.`updatedDate` AS `updatedDate`,`project`.`updatedBy` AS `updatedBy`,`project`.`deletedDate` AS `deletedDate`,`project`.`deletedBy` AS `deletedBy`,`org`.`organisationName` AS `organisationName`,`usr`.`first_name` AS `shFirstName`,`usr`.`last_name` AS `shLastName`,`lk`.`lookupValueChar` AS `importanceDescription`,`usr2`.`first_name` AS `pmFirstName`,`usr2`.`last_name` AS `pmLastName`,`usr3`.`id` AS `userID`,`project`.`projectID` AS `id` from ((((((`project` join `userproject` `upr` on((`project`.`projectID` = `upr`.`projectID`))) join `users` `usr3` on((`upr`.`userID` = `usr3`.`id`))) left join `organisation` `org` on((`project`.`organisationID` = `org`.`organisationID`))) left join `users` `usr` on((`project`.`stakeholderID` = `usr`.`id`))) left join `lookup` `lk` on(((`project`.`importance` = `lk`.`lookupSubTypeID`) and (`lk`.`lookupTypeID` = 19)))) left join `users` `usr2` on((`project`.`projectManagerID` = `usr2`.`id`))) where isnull(`project`.`deletedDate`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_project_documents` AS select `document`.`documentID` AS `documentID`,`document`.`documentTypeID` AS `documentTypeID`,`document`.`documentParentID` AS `documentParentID`,`document`.`documentName` AS `documentName`,`document`.`documentFileName` AS `documentFileName`,`document`.`documentTitle` AS `documentTitle`,`document`.`createdDate` AS `createdDate`,`document`.`createdBy` AS `createdBy`,`document`.`deletedDate` AS `deletedDate`,`document`.`deletedBy` AS `deletedBy`,`document`.`documentID` AS `id` from `document` where ((`document`.`documentTypeID` = 1) and isnull(`document`.`deletedDate`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_project_gantt` AS select `prj`.`projectID` AS `projectID`,`prj`.`projectName` AS `projectName`,`prj`.`projectDescription` AS `projectDescription`,`prj`.`updatedDate` AS `updatedDate`,`prj`.`updatedBy` AS `updatedBy`,`tsl`.`taskListID` AS `taskListID`,`tsl`.`taskListName` AS `taskListName`,`tsl`.`taskListDescription` AS `taskListDescription`,`tsk`.`taskID` AS `taskID`,`tsk`.`taskDescription` AS `taskDescription`,`prj`.`deletedDate` AS `deletedDate`,ifnull(`tsk`.`taskStartDate`,(now() - interval 30 day)) AS `taskStartDate`,`tsk`.`assignedTo` AS `assignedTo`,(`tsk`.`taskStartDate` + interval `tsk`.`taskTimeEstimate` day) AS `taskEndDate`,ifnull(`tsk`.`taskTimeEstimate`,1) AS `taskTimeEstimate`,`tsk`.`taskPercentComplete` AS `taskpercentcomplete`,`tsk`.`taskID` AS `id`,`tsk`.`deletedDate` AS `taskDeletedDate` from ((`project` `prj` join `tasklist` `tsl` on((`prj`.`projectID` = `tsl`.`projectID`))) join `task` `tsk` on((`tsk`.`taskListID` = `tsl`.`taskListID`))) where (`tsk`.`taskStartDate` is not null) order by `tsl`.`taskListID`,`tsk`.`assignedTo`,`tsk`.`taskStartDate`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_project_opinion` AS select `opinion`.`opinionID` AS `opinionID`,`project`.`projectID` AS `projectID`,`opinion`.`userID` AS `userID`,`opinion`.`itemID` AS `itemID`,`opinion`.`itemType` AS `itemType`,`opinion`.`opinionType` AS `opinionType`,`opinion`.`opinion` AS `opinion` from (`project` join `opinion` on((`project`.`projectID` = `opinion`.`itemID`))) where isnull(`opinion`.`deletedDate`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_project_opinion_detail` AS select `opinion`.`opinionID` AS `opinionID`,`project`.`projectID` AS `projectID`,`opinion`.`userID` AS `userID`,`opinion`.`itemID` AS `itemID`,`opinion`.`itemType` AS `itemType`,`opinion`.`opinionType` AS `opinionType`,`lk`.`lookupValueChar` AS `opinionDescription`,concat(`usr`.`first_name`,' ',`usr`.`last_name`) AS `userName`,`opinion`.`opinionID` AS `id` from (((`project` join `opinion` on((`project`.`projectID` = `opinion`.`itemID`))) join `lookup` `lk` on(((`lk`.`lookupSubTypeID` = `opinion`.`opinionType`) and (`lk`.`lookupTypeID` = 20)))) join `users` `usr` on((`opinion`.`userID` = `usr`.`id`))) where isnull(`opinion`.`deletedDate`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_project_pie` AS select `prj`.`projectID` AS `projectID`,`tsl`.`taskListName` AS `taskListName`,count(`tsk`.`taskID`) AS `countTasks`,`tsk`.`deletedDate` AS `deletedDate`,`tsk`.`taskID` AS `id` from ((`project` `prj` left join `tasklist` `tsl` on((`prj`.`projectID` = `tsl`.`projectID`))) left join `task` `tsk` on((`tsk`.`taskListID` = `tsl`.`taskListID`))) group by `prj`.`projectID`,`tsl`.`taskListDescription`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_project_tasklists` AS select distinct `pr`.`projectID` AS `projectID`,`pr`.`projectName` AS `projectName`,`pr`.`clientID` AS `clientID`,`tl`.`taskListID` AS `taskListID`,`tl`.`taskListName` AS `taskListName`,`upr`.`userID` AS `userID`,`pr`.`deletedDate` AS `deletedDate`,`tl`.`taskListID` AS `id` from ((`project` `pr` join `tasklist` `tl` on((`pr`.`projectID` = `tl`.`projectID`))) join `userproject` `upr` on((`upr`.`projectID` = `pr`.`projectID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_project_tasks` AS select distinct `pr`.`projectID` AS `projectID`,`pr`.`projectName` AS `projectName`,`pr`.`projectDescription` AS `projectDescription`,`tl`.`taskListID` AS `taskListID`,`tl`.`taskListName` AS `taskListName`,`tl`.`taskListDescription` AS `taskListDescription`,`tk`.`taskID` AS `taskID`,`tk`.`taskName` AS `taskName`,`tk`.`taskDescription` AS `taskDescription`,concat(left(`tk`.`taskDescription`,80),'...') AS `taskDescriptionShort`,`tk`.`taskTypeID` AS `taskTypeID`,`tk`.`taskStatusID` AS `taskStatusID`,`tk`.`taskPriorityID` AS `taskPriorityID`,`tk`.`assignedTo` AS `assignedTo`,`lkst`.`lookupValueChar` AS `taskStatus`,`lkpr`.`lookupValueChar` AS `taskPriority`,`tk`.`taskID` AS `id`,`pr`.`clientID` AS `clientID`,`tk`.`createdBy` AS `taskCreatedBy`,`tk`.`deletedBy` AS `task_deleted_by`,`tl`.`deletedBy` AS `tasklist_deleted_by` from ((((`project` `pr` join `tasklist` `tl` on((`pr`.`projectID` = `tl`.`projectID`))) left join `task` `tk` on((`tl`.`taskListID` = `tk`.`taskListID`))) left join `lookup` `lkst` on(((`tk`.`taskStatusID` = `lkst`.`lookupValueNum`) and (`lkst`.`lookupTypeID` = 21)))) left join `lookup` `lkpr` on(((`tk`.`taskPriorityID` = `lkpr`.`lookupValueNum`) and (`lkpr`.`lookupTypeID` = 4))));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_project_user_emails` AS select distinct `us`.`email` AS `email`,`us`.`first_name` AS `first_name`,`us`.`last_name` AS `last_name`,`up`.`projectID` AS `projectID` from (((`userproject` `up` join `users` `us` on((`us`.`id` = `up`.`userID`))) join `project` `pr` on(`pr`.`stakeholderID`)) join `project` `pr2` on(`pr2`.`projectManagerID`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_project_users` AS select `us`.`first_name` AS `first_name`,`us`.`last_name` AS `last_name`,`up`.`userID` AS `userid`,`up`.`projectID` AS `projectID`,`tl`.`taskListID` AS `taskListID`,`tk`.`taskID` AS `taskID` from (((`userproject` `up` join `tasklist` `tl` on((`up`.`projectID` = `tl`.`projectID`))) join `task` `tk` on((`tk`.`taskListID` = `tk`.`taskListID`))) join `users` `us` on((`us`.`id` = `up`.`userID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_projectgantt_jq` AS select `prj`.`projectID` AS `projectID`,`prj`.`projectName` AS `projectName`,`prj`.`projectDescription` AS `projectDescription`,`prj`.`updatedDate` AS `updatedDate`,`prj`.`updatedBy` AS `updatedBy`,`tsl`.`taskListID` AS `taskListID`,`tsl`.`taskListName` AS `taskListName`,`tsl`.`taskListDescription` AS `taskListDescription`,`tsk`.`taskID` AS `taskID`,`tsk`.`taskDescription` AS `taskDescription`,ifnull(`tsk`.`taskLinkID`,`tsk`.`taskID`) AS `taskOrderID`,`prj`.`deletedDate` AS `deletedDate`,ifnull((unix_timestamp((`tsk2`.`taskStartDate` + interval `tsk2`.`taskTimeEstimate` day)) * 1000),ifnull((unix_timestamp(`tsk`.`taskStartDate`) * 1000),(unix_timestamp(`tsk`.`createdDate`) * 1000))) AS `taskStartDate`,`tsk`.`assignedTo` AS `assignedTo`,(unix_timestamp((`tsk`.`taskStartDate` + interval `tsk`.`taskTimeEstimate` day)) * 1000) AS `taskEndDate`,`tsk`.`taskTimeEstimate` AS `taskTimeEstimate`,`tsk`.`taskStartDate` AS `taskStartDate_unformatted`,`tsk`.`taskTimeEstimate` AS `time_estimate`,`tsk`.`taskID` AS `id` from (((`project` `prj` join `tasklist` `tsl` on((`prj`.`projectID` = `tsl`.`projectID`))) join `task` `tsk` on((`tsk`.`taskListID` = `tsl`.`taskListID`))) left join `task` `tsk2` on((`tsk`.`taskID` = `tsk2`.`taskLinkID`))) where isnull(`tsk`.`deletedDate`) order by `prj`.`projectID`,ifnull(`tsk`.`taskLinkID`,`tsk`.`taskID`),`tsk`.`taskListID`,`tsk`.`assignedTo`,`tsk`.`taskStartDate`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_queue_teams` AS select `qt`.`id` AS `id`,`qt`.`queueID` AS `queueID`,`tm`.`teamID` AS `teamID`,`tm`.`teamName` AS `teamName`,`tm`.`teamDescription` AS `teamDescription`,`qt`.`deletedDate` AS `deletedDate` from (`team` `tm` join `queue_team` `qt` on((`tm`.`teamID` = `qt`.`queueTeamID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_queue_users` AS select `qu`.`id` AS `id`,`us`.`id` AS `userid`,`qu`.`queueID` AS `queueID`,`us`.`first_name` AS `first_name`,`us`.`last_name` AS `last_name`,`qu`.`deletedDate` AS `deletedDate` from (`auth_user` `us` join `queue_user` `qu` on((`us`.`id` = `qu`.`queueUserID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_registered_user` AS select `users`.`id` AS `userID`,`users`.`email` AS `email`,`users`.`first_name` AS `first_name`,`users`.`last_name` AS `last_name`,`users`.`company` AS `company`,`users`.`phone` AS `phone` from `users`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_schedule` AS select `phs`.`phaseID` AS `phaseID`,`phs`.`phaseName` AS `phaseName`,`phs`.`phaseDescription` AS `phaseDescription`,`phs`.`startDate` AS `startdate`,`tsk`.`taskName` AS `taskname`,`tsk`.`taskID` AS `taskID`,`tsk`.`assignedTo` AS `assignedTo`,`phs`.`phaseID` AS `id`,`phs`.`clientID` AS `clientid` from (`phase` `phs` left join `task` `tsk` on((`phs`.`phaseID` = `tsk`.`phaseID`))) where ((isnull(`phs`.`deletedDate`) and isnull(`tsk`.`taskID`)) or `tsk`.`taskID` in (select `task`.`taskID` from `task` where (isnull(`task`.`deletedDate`) or (`task`.`taskStatusID` not in (7,8,9)))));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_schedule_queue` AS select `tsk`.`taskID` AS `id`,`tsk`.`taskDescription` AS `description`,`tsk`.`assignedTo` AS `assignedTo`,1 AS `type` from ((`project` `prj` join `tasklist` `tkl` on((`prj`.`projectID` = `tkl`.`taskListID`))) join `task` `tsk` on((`tkl`.`taskListID` = `tsk`.`taskListID`))) where (isnull(`tsk`.`deletedDate`) and (`tsk`.`taskStatusID` not in (7,8,9)) and (not(`tsk`.`taskID` in (select `board`.`itemID` from `board` where ((`board`.`itemType` = 1) and (`board`.`columnNo` <> 1)))))) union select `prb`.`problemID` AS `id`,`prb`.`problemHeader` AS `description`,`prb`.`assignedTo` AS `assignedTo`,2 AS `type` from `problem` `prb` where (isnull(`prb`.`deletedDate`) and (`prb`.`problemStatusID` <> 4) and (not(`prb`.`problemID` in (select `board`.`itemID` from `board` where ((`board`.`itemType` = 2) and (`board`.`columnNo` <> 1))))));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_search` AS select `pr`.`projectID` AS `projectID`,`pr`.`organisationID` AS `organisationID`,`pr`.`projectName` AS `projectName`,`pr`.`projectDescription` AS `projectDescription`,`tl`.`taskListID` AS `taskListID`,`tl`.`taskListName` AS `taskListName`,`tl`.`taskListDescription` AS `taskListDescription`,`tk`.`taskID` AS `taskID`,`tk`.`taskName` AS `taskName`,`tk`.`taskDescription` AS `taskDescription`,`up`.`userID` AS `userID`,`pr`.`projectID` AS `id`,`pr`.`clientID` AS `clientid` from (((`project` `pr` left join `tasklist` `tl` on((`pr`.`projectID` = `tl`.`projectID`))) left join `task` `tk` on((`tl`.`taskListID` = `tk`.`taskListID`))) join `userproject` `up` on((`up`.`projectID` = `pr`.`projectID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_subscribers_recent` AS select `acc`.`accountName` AS `accountName`,`acc`.`authenticationID` AS `authenticationID`,`acc`.`authenticationID2` AS `authenticationID2`,`acc`.`authenticationID3` AS `authenticationID3`,`cli`.`clientName` AS `clientName`,`cli`.`city` AS `city`,`cli`.`country` AS `country`,`acc`.`createdDate` AS `createdDate` from (`account` `acc` left join `client` `cli` on((`acc`.`accountID` = `cli`.`accountID`))) where (`acc`.`createdDate` > (curdate() - interval 28 day));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_subscription` AS select `ac`.`authenticationID` AS `authenticationID`,`ac`.`authenticationID2` AS `authenticationID2`,`org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`ac`.`firstname` AS `firstname`,`ac`.`lastname` AS `lastname`,`ac`.`phone` AS `phone`,`ac`.`email` AS `email` from ((`account` `ac` join `client` `cl` on((`ac`.`accountID` = `cl`.`accountID`))) join `organisation` `org` on((`org`.`clientID` = `cl`.`clientID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_suggest_problem_links` AS select `problem`.`problemID` AS `id`,`problem`.`problemHeader` AS `value`,`userorganisation`.`userID` AS `userID` from (`problem` join `userorganisation` on((`problem`.`organisationID` = `userorganisation`.`organisationID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_suggest_project_links` AS select `project`.`projectID` AS `id`,`project`.`projectName` AS `value`,`userproject`.`userID` AS `userID` from (`project` join `userproject` on((`project`.`projectID` = `userproject`.`projectID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_task_dependency` AS select `tsk`.`taskID` AS `taskID`,`tkl`.`taskListID` AS `taskListID`,`prj`.`clientID` AS `clientID`,`prj`.`projectID` AS `projectID`,`tsk`.`taskTypeID` AS `taskTypeID`,`tsk`.`taskName` AS `taskName`,`tsk`.`taskDescription` AS `taskDescription`,`tsk`.`taskStatusID` AS `taskStatusID`,`tsk`.`taskPriorityID` AS `taskPriorityID`,`tsk`.`assignedTo` AS `assignedTo`,`tsk`.`taskStartDate` AS `taskStartDate`,`tsk`.`taskTimeEstimate` AS `taskTimeEstimate`,`tsk`.`taskPercentComplete` AS `taskPercentComplete`,`tsk`.`taskID` AS `id` from ((`task` `tsk` join `tasklist` `tkl` on((`tsk`.`taskListID` = `tkl`.`taskListID`))) join `project` `prj` on((`tkl`.`projectID` = `prj`.`projectID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_task_detail` AS select `tsk`.`taskID` AS `taskID`,`tsk`.`taskName` AS `taskName`,`tsk`.`taskDescription` AS `taskDescription`,`tsk`.`taskTypeID` AS `taskTypeID`,`lkpr`.`lookupValueChar` AS `taskPriority`,`lkst`.`lookupValueChar` AS `taskStatus`,`lkpr`.`lookupValueNum` AS `taskPriorityID`,`lkst`.`lookupValueNum` AS `taskStatusID`,`tsk`.`assignedTo` AS `assignedTo`,concat(`usr`.`first_name`,' ',`usr`.`last_name`) AS `assignedToName`,date_format(`tsk`.`taskStartDate`,'%Y/%m/%d') AS `taskStartDate`,`tsk`.`taskTimeEstimate` AS `taskTimeEstimate`,`tsk`.`taskPercentComplete` AS `taskPercentComplete`,`tsk`.`taskLinkID` AS `taskLinkID`,`tsk2`.`taskID` AS `linkedTaskID`,`tsk2`.`taskName` AS `linkedTaskName`,`tsk2`.`taskDescription` AS `linkedTaskDescription`,`upr`.`userID` AS `userID`,`prj`.`projectName` AS `projectName`,`tkl`.`taskListName` AS `tasklistName`,`tkl`.`taskListID` AS `taskListID`,date_format(`tsk`.`completionDate`,'%Y/%m/%d') AS `completionDate`,`tsk`.`phaseID` AS `phaseID`,`phs`.`phaseName` AS `phaseName`,`tsk`.`taskID` AS `id`,`tsk`.`clientID` AS `clientID` from ((((((((`task` `tsk` join `tasklist` `tkl` on((`tkl`.`taskListID` = `tsk`.`taskListID`))) join `project` `prj` on((`prj`.`projectID` = `tkl`.`projectID`))) join `userproject` `upr` on((`upr`.`projectID` = `prj`.`projectID`))) left join `lookup` `lkpr` on(((`tsk`.`taskPriorityID` = `lkpr`.`lookupValueNum`) and (`lkpr`.`lookupTypeID` = 4)))) left join `lookup` `lkst` on(((`tsk`.`taskStatusID` = `lkst`.`lookupValueNum`) and (`lkst`.`lookupTypeID` = 21)))) left join `users` `usr` on((`tsk`.`assignedTo` = `usr`.`id`))) left join `task` `tsk2` on((`tsk`.`taskLinkID` = `tsk2`.`taskID`))) left join `phase` `phs` on((`tsk`.`phaseID` = `phs`.`phaseID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_task_documents` AS select `document`.`documentID` AS `documentID`,`document`.`documentTypeID` AS `documentTypeID`,`document`.`documentParentID` AS `documentParentID`,`document`.`documentName` AS `documentName`,`document`.`documentFileName` AS `documentFileName`,`document`.`documentTitle` AS `documentTitle`,`document`.`createdDate` AS `createdDate`,`document`.`createdBy` AS `createdBy`,`document`.`deletedDate` AS `deletedDate`,`document`.`deletedBy` AS `deletedBy`,`document`.`documentID` AS `id` from `document` where ((`document`.`documentTypeID` = 3) and isnull(`document`.`deletedDate`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_task_links` AS select distinct `tk`.`taskID` AS `taskID`,`tkl`.`taskListID` AS `taskListID`,`tk2`.`taskID` AS `taskIDIn`,`tkl2`.`taskListID` AS `taskListIDIn`,concat(left(`tk`.`taskDescription`,20),'...') AS `taskDescription`,`tk`.`taskName` AS `taskName`,`tk`.`taskID` AS `id` from ((((`task` `tk` join `tasklist` `tkl` on((`tk`.`taskListID` = `tkl`.`taskListID`))) join `project` `pr` on((`tkl`.`projectID` = `pr`.`projectID`))) join `tasklist` `tkl2` on((`tkl2`.`projectID` = `pr`.`projectID`))) join `task` `tk2` on((`tk2`.`taskListID` = `tkl2`.`taskListID`))) where (isnull(`pr`.`deletedDate`) and isnull(`tkl`.`deletedDate`) and isnull(`tk`.`deletedDate`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_task_statuses` AS select `lookup`.`clientID` AS `clientID`,`lookup`.`lookupDescription` AS `lookupDescription`,`lookup`.`lookupValueNum` AS `lookupValueNum`,`lookup`.`lookupValueChar` AS `lookupValueChar`,`lookup`.`lookupOrder` AS `lookupOrder`,`lookup`.`lookupValueNum` AS `id` from `lookup` where (`lookup`.`lookupTypeID` = 21);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_task_user_emails` AS select distinct `us`.`email` AS `email`,`us`.`first_name` AS `first_name`,`us`.`last_name` AS `last_name`,`tk`.`taskID` AS `taskID` from (((`userproject` `up` join `tasklist` `tl` on((`up`.`projectID` = `tl`.`projectID`))) join `task` `tk` on((`tk`.`taskListID` = `tl`.`taskListID`))) join `users` `us` on((`us`.`id` = `up`.`userID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_task_users` AS select `us`.`first_name` AS `first_name`,`us`.`last_name` AS `last_name`,`up`.`userID` AS `userid`,`up`.`projectID` AS `projectID`,`tl`.`taskListID` AS `taskListID`,`tk`.`taskID` AS `taskID` from (((`userproject` `up` join `tasklist` `tl` on((`up`.`projectID` = `tl`.`projectID`))) join `task` `tk` on((`tk`.`taskListID` = `tk`.`taskListID`))) join `users` `us` on((`us`.`id` = `up`.`userID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_tasklist_activity` AS select `tkl`.`taskListID` AS `taskListID`,`tkl`.`createdDate` AS `date`,`tkl`.`createdBy` AS `userID`,concat(`usr`.`first_name`,' ',`usr`.`last_name`) AS `name`,'Created' AS `activity` from (`tasklist` `tkl` join `users` `usr` on((`usr`.`id` = `tkl`.`createdBy`))) union select `tkl`.`taskListID` AS `taskListID`,`tkl`.`updatedDate` AS `date`,`tkl`.`updatedBy` AS `userID`,concat(`usr`.`first_name`,' ',`usr`.`last_name`) AS `name`,'Last Updated' AS `activity` from (`tasklist` `tkl` join `users` `usr` on((`usr`.`id` = `tkl`.`updatedBy`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_tasklist_project` AS select `prj`.`projectID` AS `projectID`,`prj`.`projectName` AS `projectName`,`tkl`.`taskListID` AS `taskListID`,`tkl`.`taskListName` AS `taskListName`,`tkl`.`taskListDescription` AS `taskListDescription`,`prj`.`clientID` AS `clientID` from (`tasklist` `tkl` join `project` `prj` on((`tkl`.`projectID` = `prj`.`projectID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_tasklist_task` AS select `tkl`.`taskListID` AS `taskListID`,`tkl`.`taskListName` AS `taskListName`,`tkl`.`taskListDescription` AS `taskListDescription`,`tkl`.`clientID` AS `clientID`,`tsk`.`taskID` AS `taskID`,`tsk`.`taskDescription` AS `taskDescription`,concat(left(`tsk`.`taskDescription`,80),'...') AS `taskName`,`tsk`.`taskPriorityID` AS `taskPriorityID`,`tsk`.`taskStatusID` AS `taskStatusID`,`lk`.`lookupValueChar` AS `taskStatus`,`lk2`.`lookupValueChar` AS `taskPriority` from (((`tasklist` `tkl` join `task` `tsk` on((`tkl`.`taskListID` = `tsk`.`taskListID`))) left join `lookup` `lk` on((`tsk`.`taskStatusID` = `lk`.`lookupSubTypeID`))) left join `lookup` `lk2` on((`tsk`.`taskPriorityID` = `lk2`.`lookupSubTypeID`))) where ((`lk`.`lookupTypeID` = 21) and (`lk2`.`lookupTypeID` = 4));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_tasklist_users` AS select `usr`.`id` AS `id`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`tl`.`taskListID` AS `taskListID`,`pr`.`projectID` AS `projectID`,`pr`.`clientID` AS `clientID` from (((`tasklist` `tl` join `project` `pr` on((`tl`.`projectID` = `pr`.`projectID`))) join `userproject` `upr` on((`upr`.`projectID` = `pr`.`projectID`))) join `users` `usr` on((`usr`.`id` = `upr`.`userID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_tasklist_users_distinct` AS select distinct `usr`.`id` AS `id`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`pr`.`projectID` AS `projectID`,`pr`.`clientID` AS `clientID` from (((`tasklist` `tl` join `project` `pr` on((`tl`.`projectID` = `pr`.`projectID`))) join `userproject` `upr` on((`upr`.`projectID` = `pr`.`projectID`))) join `users` `usr` on((`usr`.`id` = `upr`.`userID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_team_members` AS select `tm`.`teamID` AS `teamID`,`tm`.`teamName` AS `teamName`,`tu`.`userID` AS `userID`,`tm`.`clientID` AS `clientID`,`tu`.`id` AS `id`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`tu`.`deletedDate` AS `deletedDate` from ((`team` `tm` join `team_user` `tu` on((`tm`.`teamID` = `tu`.`teamID`))) join `users` `usr` on((`usr`.`id` = `tu`.`userID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_time_calendar` AS select ifnull(`ti`.`timeID`,`tk`.`taskID`) AS `id`,`tk`.`taskName` AS `title`,ifnull(date_format(`ti`.`timeDay`,'%Y-%m-%d %H:%i:00'),date_format(`tk`.`taskStartDate`,'%Y-%m-%d %H:%i:00')) AS `start`,`ti`.`timeID` AS `url`,`tk`.`assignedTo` AS `assignedTo`,`ti`.`userID` AS `userID`,ifnull(`ti`.`clientID`,`tk`.`clientID`) AS `clientID` from (`task` `tk` left join `time` `ti` on((`ti`.`taskID` = `tk`.`taskID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_time_detail` AS select `time`.`timeID` AS `timeID`,date_format(`time`.`timeDay`,'%d %b %Y') AS `timeDay`,`time`.`hours` AS `hours`,`time`.`taskID` AS `taskID`,`time`.`timeTypeID` AS `timeTypeID`,`time`.`userID` AS `userID`,`task`.`taskName` AS `taskName`,`lookup`.`lookupValueChar` AS `lookupValueChar`,`users`.`first_name` AS `first_name`,`users`.`last_name` AS `last_name`,`time`.`comments` AS `comments`,`time`.`timeID` AS `id` from (((`time` join `task` on((`time`.`taskID` = `task`.`taskID`))) join `lookup` on((`time`.`timeTypeID` = `lookup`.`lookupValueNum`))) join `users` on((`time`.`userID` = `users`.`id`))) where (`lookup`.`lookupTypeID` = 13);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_time_grid` AS select distinct `pr`.`projectName` AS `project`,`pr`.`projectID` AS `projectid`,`tl`.`taskListName` AS `tasklist`,`tl`.`taskListID` AS `tasklistid`,`ti`.`timeID` AS `id`,`tk`.`taskName` AS `task`,`tk`.`taskID` AS `taskid`,`ti`.`timeDay` AS `timeDay`,cast(`ti`.`timeDay` as date) AS `timeDayDate`,date_format(`ti`.`timeDay`,'%H') AS `starthour`,date_format(`ti`.`timeDay`,'%i') AS `startmin`,truncate(`ti`.`hours`,0) AS `hours`,(`ti`.`hours` - truncate(`ti`.`hours`,0)) AS `mins`,((`ti`.`hours` - truncate(`ti`.`hours`,0)) * 60) AS `minsformat`,`tk`.`assignedTo` AS `assignedTo`,`pr`.`clientID` AS `clientid` from (((`time` `ti` join `task` `tk` on((`ti`.`taskID` = `tk`.`taskID`))) join `tasklist` `tl` on((`tl`.`taskListID` = `tk`.`taskListID`))) join `project` `pr` on((`pr`.`projectID` = `tl`.`projectID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_time_task` AS select `pr`.`projectName` AS `project`,`pr`.`projectID` AS `projectid`,`tl`.`taskListName` AS `tasklist`,`tl`.`taskListID` AS `tasklistid`,left(`tk`.`taskName`,50) AS `task`,`tk`.`taskID` AS `taskid`,`tk`.`assignedTo` AS `assignedTo`,`tk`.`taskID` AS `id`,`tk`.`clientID` AS `clientID` from ((`task` `tk` join `tasklist` `tl` on((`tl`.`taskListID` = `tk`.`taskListID`))) join `project` `pr` on((`pr`.`projectID` = `tl`.`projectID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_time_type` AS select `lookup`.`lookupValueNum` AS `lookupValueNum`,`lookup`.`lookupValueChar` AS `lookupValueChar`,`lookup`.`clientID` AS `clientID`,`lookup`.`lookupValueNum` AS `id` from `lookup` where (isnull(`lookup`.`deletedDate`) and (`lookup`.`lookupTypeID` = 13));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_user_assigned` AS select `project`.`projectID` AS `projectID`,`project`.`projectName` AS `projectName`,`tasklist`.`taskListID` AS `taskListID`,`tasklist`.`taskListName` AS `taskListName`,`task`.`taskID` AS `taskID`,`task`.`taskDescription` AS `taskDescription`,`task`.`assignedTo` AS `assignedTo`,`task`.`deletedDate` AS `deletedDate`,`task`.`taskID` AS `id` from ((`task` join `tasklist` on((`task`.`taskListID` = `tasklist`.`taskListID`))) join `project` on((`project`.`projectID` = `tasklist`.`projectID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_user_attributes` AS select `user_attributes`.`userID` AS `userID`,`user_attributes`.`vip` AS `vip` from `user_attributes`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_user_context_full` AS select `usr`.`id` AS `id`,`org`.`clientID` AS `clientID`,`ausr`.`username` AS `username`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`ausr`.`is_superuser` AS `isSuperUser`,`ausr`.`is_staff` AS `isStaff`,`cli`.`clientName` AS `clientName`,`tea`.`teamName` AS `teamName` from (((((`users` `usr` join `auth_user` `ausr` on((`usr`.`id` = `ausr`.`id`))) join `organisation` `org` on((`org`.`organisationID` = `usr`.`company`))) join `client` `cli` on((`org`.`clientID` = `cli`.`clientID`))) left join `team_user` `tu` on((`usr`.`id` = `tu`.`userID`))) left join `team` `tea` on((`tu`.`teamID` = `tea`.`teamID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_user_context_minimal` AS select `usr`.`id` AS `id`,`org`.`clientID` AS `clientID`,`ausr`.`username` AS `username` from ((`users` `usr` join `auth_user` `ausr` on((`usr`.`id` = `ausr`.`id`))) join `organisation` `org` on((`org`.`organisationID` = `usr`.`company`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_user_current_projects` AS select `upr`.`userID` AS `userID`,`proj`.`projectID` AS `projectID`,`proj`.`projectName` AS `projectName`,`upr`.`userID` AS `id` from (`userproject` `upr` join `project` `proj` on((`upr`.`projectID` = `proj`.`projectID`))) where (isnull(`upr`.`deletedDate`) and isnull(`proj`.`deletedDate`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_user_detail` AS select `usr`.`id` AS `id`,`usr`.`username` AS `username`,`usr`.`email` AS `email`,`usr`.`active` AS `active`,`usr`.`phone` AS `phone`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`attr`.`vip` AS `vip`,`pyr`.`defaultRate` AS `pay_rate`,`txr`.`defaultRate` AS `tax_rate`,`org`.`clientID` AS `clientID`,`ausr`.`is_staff` AS `is_staff`,`ausr`.`is_superuser` AS `is_superuser` from (((((`users` `usr` join `organisation` `org` on((`usr`.`company` = `org`.`organisationID`))) left join `auth_user` `ausr` on((`usr`.`username` = `ausr`.`username`))) left join `user_attributes` `attr` on((`usr`.`id` = `attr`.`userID`))) left join `user_payrate` `pyr` on((`usr`.`id` = `pyr`.`userID`))) left join `user_taxrate` `txr` on((`usr`.`id` = `txr`.`userID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_user_group` AS select `users`.`id` AS `userID`,`users_groups`.`group_id` AS `group_id`,`groups`.`name` AS `name` from ((`users` join `users_groups` on((`users`.`id` = `users_groups`.`user_id`))) join `groups` on((`users_groups`.`group_id` = `groups`.`id`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_user_group_detail` AS select `users`.`id` AS `userID`,`users_groups`.`group_id` AS `group_id`,`groups`.`name` AS `name`,`groups`.`description` AS `description` from ((`users` join `users_groups` on((`users`.`id` = `users_groups`.`user_id`))) join `groups` on((`users_groups`.`group_id` = `groups`.`id`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_user_login` AS select `usr`.`id` AS `id`,`usr`.`username` AS `username`,`usr`.`email` AS `email`,`usr`.`active` AS `active`,`usr`.`password` AS `password` from ((`users` `usr` join `organisation` `org` on((`usr`.`company` = `org`.`organisationID`))) left join `user_attributes` `attr` on((`usr`.`id` = `attr`.`userID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_user_potential_projects` AS select `org`.`organisationID` AS `organisationID`,`org`.`organisationName` AS `organisationName`,`usr`.`id` AS `userID`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`proj`.`projectID` AS `projectID`,`proj`.`projectName` AS `projectName` from (((`userorganisation` `uorg` join `users` `usr` on((`uorg`.`organisationID` = `usr`.`company`))) join `organisation` `org` on((`org`.`organisationID` = `uorg`.`organisationID`))) join `project` `proj` on((`org`.`organisationID` = `proj`.`organisationID`))) where (isnull(`uorg`.`deletedDate`) and isnull(`org`.`deletedDate`) and (not(`proj`.`projectID` in (select `upr`.`projectID` from `userproject` `upr` where (`upr`.`userID` = `usr`.`id`)))));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_user_projects` AS select `uorg`.`userID` AS `userID`,`uorg`.`organisationID` AS `organisationID`,`proj`.`projectID` AS `projectID`,`proj`.`projectName` AS `projectName`,`uorg`.`userID` AS `id` from (`userorganisation` `uorg` join `project` `proj` on((`uorg`.`organisationID` = `proj`.`organisationID`))) where (isnull(`uorg`.`deletedDate`) and isnull(`proj`.`deletedDate`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_users` AS select `usr`.`id` AS `id`,`usr`.`username` AS `username`,`usr`.`email` AS `email`,`usr`.`active` AS `active`,`usr`.`phone` AS `phone`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name`,`org`.`organisationName` AS `organisationName` from (`users` `usr` join `organisation` `org` on((`usr`.`company` = `org`.`organisationID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_organisation_detail_sidebar` AS select 'Created:' AS `description`,date_format(`org`.`createdDate`,'%d %b %Y') AS `column2`,'' AS `id`,0 AS `column4`,`org`.`organisationID` AS `organisationID` from `organisation` `org` union select 'Last changed:' AS `description`,date_format(`org`.`createdDate`,'%d %b %Y') AS `column2`,'' AS `id`,3 AS `column4`,`org`.`organisationID` AS `organisationID` from `organisation` `org` union select 'Organisation projects' AS `Organisation projects`,'' AS `column2`,'' AS `id`,5 AS `5`,'' AS `organisationID` union select `prj`.`projectName` AS `projectName`,concat('Created: ',date_format(`prj`.`createdDate`,'%d %b %Y')) AS `concat ('Created: ', prj.createdDate)`,`prj`.`projectID` AS `projectID`,7 AS `7`,`org`.`organisationID` AS `organisationID` from (`organisation` `org` join `project` `prj` on((`prj`.`organisationID` = `org`.`organisationID`))) order by `column4` limit 40;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_organisation_index_sidebar` AS select 'New organisations' AS `organisationName`,'' AS `column2`,'' AS `id`,0 AS `column4`,'' AS `userID` union select `org`.`organisationName` AS `organisationName`,`org`.`createdDate` AS `createdDate`,`org`.`organisationID` AS `id`,3 AS `column4`,`usr`.`id` AS `userID` from ((`organisation` `org` join `client` `cl` on((`org`.`clientID` = `cl`.`clientID`))) join `users` `usr` on((`usr`.`company` = `org`.`organisationID`))) where (`org`.`createdDate` > `FN_PAST_DATE`(30)) union select 'Changed organisations' AS `Changed organisations`,'' AS `column2`,'' AS `id`,5 AS `column4`,'' AS `userID` union select `org`.`organisationName` AS `organisationName`,`org`.`updatedDate` AS `updatedDate`,`org`.`organisationID` AS `id`,7 AS `columnn4`,`usr`.`id` AS `userID` from ((`organisation` `org` join `client` `cl` on((`org`.`clientID` = `cl`.`clientID`))) join `users` `usr` on((`usr`.`company` = `org`.`organisationID`))) where (`org`.`updatedDate` > `FN_PAST_DATE`(30)) union select 'New users' AS `New users`,'' AS `column2`,'' AS `id`,9 AS `column4`,'' AS `userID` union select `org`.`organisationName` AS `organisationName`,`usr`.`username` AS `username`,`org`.`organisationID` AS `id`,11 AS `column4`,`usr`.`id` AS `userID` from ((`organisation` `org` join `client` `cl` on((`org`.`clientID` = `cl`.`clientID`))) join `users` `usr` on((`org`.`organisationID` = `usr`.`company`))) where (`usr`.`created_on` > `FN_PAST_DATE`(30)) union select 'New projects' AS `New projects`,'' AS `column2`,'' AS `id`,13 AS `column4`,'' AS `userID` union select `org`.`organisationName` AS `organisationName`,`prj`.`projectName` AS `projectName`,`org`.`organisationID` AS `id`,15 AS `column4`,`usr`.`id` AS `userID` from (((`organisation` `org` join `client` `cl` on((`org`.`clientID` = `cl`.`clientID`))) join `users` `usr` on((`org`.`organisationID` = `usr`.`company`))) join `project` `prj` on((`prj`.`organisationID` = `org`.`organisationID`))) where (`usr`.`created_on` > `FN_PAST_DATE`(30)) order by `column4` limit 40;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_problem_detail_sidebar` AS select 'Created:' AS `description`,date_format(`prob`.`createdDate`,'%d %b %Y') AS `column2`,`prob`.`createdBy` AS `id`,0 AS `column4`,`prob`.`problemID` AS `problemID`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name` from (`problem` `prob` join `auth_user` `usr` on((`prob`.`createdBy` = `usr`.`id`))) union select 'Changed:' AS `description`,date_format(`probar`.`updatedDate`,'%d %b %Y') AS `column2`,`probar`.`updatedBy` AS `id`,3 AS `column4`,`probar`.`problemID` AS `problemID`,`usr`.`first_name` AS `first_name`,`usr`.`last_name` AS `last_name` from (`problem_archive` `probar` join `auth_user` `usr` on((`probar`.`updatedBy` = `usr`.`id`))) where (`probar`.`updatedDate` is not null) order by `column4`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_problem_index_sidebar` AS select 'New problems' AS `problemName`,'' AS `column2`,'' AS `id`,0 AS `column4`,'' AS `userID` union select distinct `prob`.`problemHeader` AS `problemHeader`,date_format(`prob`.`createdDate`,'%d %b %Y') AS `createdDate`,`prob`.`problemID` AS `problemID`,3 AS `3`,`uorg`.`userID` AS `userID` from (`problem` `prob` join `userorganisation` `uorg` on((`prob`.`organisationID` = `uorg`.`organisationID`))) where (`prob`.`createdDate` > `fn_past_date`(-(10))) union select 'Changed problems' AS `Changed problems`,'' AS `column2`,'' AS `id`,5 AS `5`,'' AS `userID` union select `prob`.`problemHeader` AS `problemHeader`,date_format(`prob`.`updatedDate`,'%d %b %Y') AS `updatedDate`,`prob`.`problemID` AS `problemID`,7 AS `7`,`uorg`.`userID` AS `userID` from (`problem` `prob` join `userorganisation` `uorg` on((`prob`.`organisationID` = `uorg`.`organisationID`))) where (`prob`.`updatedDate` > `fn_past_date`(-(20))) order by `column4`,`problemName`,`column2` limit 40;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_programme_history` AS select 'Created:' AS `description`,date_format(`prog`.`createdDate`,'%d %b %Y') AS `column2`,'' AS `id`,0 AS `column4`,`prog`.`programmeID` AS `programmeID` from `programme` `prog` union select 'Last changed:' AS `description`,date_format(`prog`.`createdDate`,'%d %b %Y') AS `column2`,'' AS `id`,3 AS `column4`,`prog`.`programmeID` AS `programmeID` from `programme` `prog` order by `column4`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_project_detail_sidebar` AS select 'Created:' AS `description`,date_format(`proj`.`createdDate`,'%d %b %Y') AS `column2`,'' AS `id`,0 AS `column4`,`proj`.`projectID` AS `projectID` from `project` `proj` where (`proj`.`createdDate` is not null) union select 'Last changed:' AS `description`,date_format(`proj`.`updatedDate`,'%d %b %Y') AS `column2`,'' AS `id`,3 AS `column4`,`proj`.`projectID` AS `projectID` from `project` `proj` where (`proj`.`updatedDate` is not null) union select 'Change' AS `description`,date_format(`proj`.`updatedDate`,'%d %b %Y') AS `column2`,'' AS `id`,4 AS `column4`,`proj`.`projectID` AS `projectID` from `project_archive` `proj` where (`proj`.`updatedDate` is not null) union select 'Project tasks' AS `description`,'' AS `column2`,'' AS `id`,5 AS `column4`,0 AS `projectID` union select `proj`.`projectName` AS `description`,concat('Created: ',date_format(`proj`.`createdDate`,'%d %b %Y')) AS `column2`,`proj`.`projectID` AS `id`,7 AS `column4`,`proj`.`projectID` AS `projectID` from (`project` `proj` join `tasklist` `tsk` on((`proj`.`projectID` = `tsk`.`projectID`))) where (`proj`.`createdDate` is not null) order by `column4`,`column2` desc;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_project_index_sidebar` AS select 'New projects' AS `projectName`,'' AS `column2`,'' AS `id`,0 AS `column4`,'' AS `userID`,'1900-01-01 00:00:00:000' AS `dateorder` union select distinct `proj`.`projectName` AS `projectName`,`proj`.`createdDate` AS `createdDate`,`proj`.`projectID` AS `projectID`,3 AS `column4`,`upr`.`userID` AS `userID`,`proj`.`createdDate` AS `dateorder` from (`project` `proj` join `userproject` `upr` on((`proj`.`projectID` = `upr`.`projectID`))) where (`proj`.`createdDate` > `FN_PAST_DATE`(-(10))) union select 'Changed projects' AS `projectName`,'' AS `column2`,'' AS `id`,5 AS `column4`,'' AS `userID`,'1900-01-01 00:00:00:000' AS `dateorder` union select `proj`.`projectName` AS `projectName`,`proj`.`updatedDate` AS `updatedDate`,`proj`.`projectID` AS `projectID`,7 AS `column4`,`upr`.`userID` AS `userID`,`proj`.`updatedDate` AS `dateorder` from (`project` `proj` join `userproject` `upr` on((`proj`.`projectID` = `upr`.`projectID`))) where (`proj`.`updatedDate` > `FN_PAST_DATE`(-(10))) union select 'New users' AS `New users`,'' AS `column2`,'' AS `id`,9 AS `column4`,'' AS `userID`,'1900-01-01 00:00:00:000' AS `dateorder` union select `proj`.`projectName` AS `projectName`,`usr`.`username` AS `column2`,`proj`.`projectID` AS `projectID`,11 AS `column4`,`upr2`.`userID` AS `userID`,`usr`.`created_on` AS `dateorder` from (((`project` `proj` left join `userproject` `upr` on((`proj`.`projectID` = `upr`.`projectID`))) join `users` `usr` on((`upr`.`userID` = `usr`.`id`))) join `userproject` `upr2` on((`proj`.`projectID` = `upr2`.`projectID`))) where (`usr`.`created_on` > `FN_PAST_DATE`(-(10))) union select 'New tasklists' AS `New tasklists`,'' AS `column2`,'' AS `id`,13 AS `column4`,'' AS `userID`,'1900-01-01 00:00:00:000' AS `dateorder` union select `proj`.`projectName` AS `projectName`,`tsk`.`taskListName` AS `taskListName`,`proj`.`projectID` AS `projectID`,15 AS `column4`,`upr`.`userID` AS `userID`,`tsk`.`createdDate` AS `dateorder` from ((`project` `proj` join `userproject` `upr` on((`proj`.`projectID` = `upr`.`projectID`))) join `tasklist` `tsk` on((`tsk`.`projectID` = `proj`.`projectID`))) where (`tsk`.`createdDate` > `FN_PAST_DATE`(-(10))) order by `column4`,`dateorder` desc limit 40;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_task_detail_sidebar` AS select 'Created:' AS `description`,date_format(`tsk`.`createdDate`,'%d %b %Y') AS `column2`,'' AS `id`,0 AS `column4`,`tsk`.`taskID` AS `taskID` from `task` `tsk` union select 'Last changed:' AS `description`,date_format(`tsk`.`updatedDate`,'%d %b %Y') AS `column2`,'' AS `id`,3 AS `column4`,`tsk`.`taskID` AS `taskID` from `task` `tsk` union select 'Task activity' AS `Task activity`,'' AS `column2`,'' AS `id`,13 AS `13`,'' AS `taskID` union select concat('Comment: ',left(`comment`.`commentText`,20),'...') AS `Comment`,date_format(`comment`.`createdDate`,'%d %b %Y') AS `createdDate`,`comment`.`commentID` AS `commentID`,15 AS `15`,`tsk`.`taskID` AS `taskID` from ((`comment` join `task` `tsk` on((`comment`.`parentID` = `tsk`.`taskID`))) join `lookup` `lk` on(((`lk`.`lookupSubTypeID` = `comment`.`commentTypeID`) and (`lk`.`lookupTypeID` = 6)))) order by `column4` limit 40;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_task_index_sidebar` AS select 'New tasks' AS `taskName`,'' AS `column2`,'' AS `id`,0 AS `column4`,'' AS `userID` union select distinct `task`.`taskName` AS `taskName`,date_format(`task`.`createdDate`,'%d %b %Y') AS `createdDate`,`task`.`taskID` AS `taskID`,3 AS `3`,`upr`.`userID` AS `userID` from ((`task` join `tasklist` `tkl` on((`task`.`taskListID` = `tkl`.`taskListID`))) join `userproject` `upr` on((`upr`.`projectID` = `tkl`.`projectID`))) where (`task`.`createdDate` > `FN_PAST_DATE`(-(10))) union select 'Changed tasks' AS `Changed tasks`,'' AS `column2`,'' AS `id`,5 AS `5`,'' AS `userID` union select `task`.`taskName` AS `taskName`,date_format(`task`.`updatedDate`,'%d %b %Y') AS `updatedDate`,`task`.`taskID` AS `taskID`,7 AS `7`,`upr`.`userID` AS `userID` from ((`task` join `tasklist` `tkl` on((`task`.`taskListID` = `tkl`.`taskListID`))) join `userproject` `upr` on((`upr`.`projectID` = `tkl`.`projectID`))) where (`task`.`updatedDate` > `FN_PAST_DATE`(-(10))) union select 'New comments' AS `New comments`,'' AS `column2`,'' AS `id`,9 AS `9`,'' AS `userID` union select 'Comment' AS `Comment`,concat(`users`.`first_name`,' ',`users`.`last_name`) AS `createdBy`,`task`.`taskID` AS `taskID`,11 AS `11`,`upr`.`userID` AS `userID` from ((((`task` join `tasklist` `tkl` on((`task`.`taskListID` = `tkl`.`taskListID`))) join `userproject` `upr` on((`tkl`.`projectID` = `upr`.`projectID`))) join `comment` on((`comment`.`parentID` = `task`.`taskID`))) join `users` on((`users`.`id` = `upr`.`userID`))) where (`comment`.`createdDate` > `FN_PAST_DATE`(-(10))) order by `column4`,`taskName`,`column2` limit 40;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_time_detail_sidebar` AS select 'Created:' AS `description`,date_format(`usr`.`created_on`,'%d %b %Y') AS `column2`,'' AS `id`,0 AS `column4`,`usr`.`id` AS `userID` from `users` `usr` union select 'Last login:' AS `description`,date_format(from_unixtime(`usr`.`last_login`),'%d %b %Y') AS `column2`,'' AS `id`,3 AS `column4`,`usr`.`id` AS `userID` from `users` `usr` order by `column4` limit 40;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_time_index_sidebar` AS select 'My time by project' AS `projectName`,'' AS `column2`,'' AS `id`,0 AS `column4`,'' AS `userID` union select `prj`.`projectName` AS `projectName`,sum(`tme`.`hours`) AS `sum(tme.hours)`,`prj`.`projectID` AS `projectID`,3 AS `column4`,`uorg2`.`userID` AS `userID` from (((((`time` `tme` join `userorganisation` `uorg` on((`tme`.`userID` = `uorg`.`userID`))) join `task` `tsk` on((`tsk`.`taskID` = `tme`.`taskID`))) join `tasklist` `tkl` on((`tkl`.`taskListID` = `tsk`.`taskListID`))) join `project` `prj` on((`prj`.`projectID` = `tkl`.`projectID`))) join `userorganisation` `uorg2` on((`uorg`.`organisationID` = `uorg2`.`organisationID`))) where (`tme`.`createdDate` > `FN_PAST_DATE`(-(90))) group by `prj`.`projectID`,`prj`.`projectName`,`prj`.`projectID`,`uorg2`.`userID` union select 'My time this week' AS `My time this week`,'' AS `column2`,'' AS `id`,5 AS `5`,'' AS `userID` union select `prj`.`projectName` AS `projectName`,sum(`tme`.`hours`) AS `sum(tme.hours)`,`prj`.`projectID` AS `projectID`,3 AS `column4`,`uorg2`.`userID` AS `userID` from (((((`time` `tme` join `userorganisation` `uorg` on((`tme`.`userID` = `uorg`.`userID`))) join `task` `tsk` on((`tsk`.`taskID` = `tme`.`taskID`))) join `tasklist` `tkl` on((`tkl`.`taskListID` = `tsk`.`taskListID`))) join `project` `prj` on((`prj`.`projectID` = `tkl`.`projectID`))) join `userorganisation` `uorg2` on((`uorg`.`organisationID` = `uorg2`.`organisationID`))) where (`tme`.`createdDate` > `FN_PAST_DATE`(-(5))) group by `prj`.`projectID`,`prj`.`projectName`,`prj`.`projectID`,`uorg2`.`userID` union select 'My time this month' AS `My time this month`,'' AS `column2`,'' AS `id`,9 AS `9`,'' AS `userID` union select `prj`.`projectName` AS `projectName`,sum(`tme`.`hours`) AS `sum(tme.hours)`,`prj`.`projectID` AS `projectID`,3 AS `column4`,`uorg2`.`userID` AS `userID` from (((((`time` `tme` join `userorganisation` `uorg` on((`tme`.`userID` = `uorg`.`userID`))) join `task` `tsk` on((`tsk`.`taskID` = `tme`.`taskID`))) join `tasklist` `tkl` on((`tkl`.`taskListID` = `tsk`.`taskListID`))) join `project` `prj` on((`prj`.`projectID` = `tkl`.`projectID`))) join `userorganisation` `uorg2` on((`uorg`.`organisationID` = `uorg2`.`organisationID`))) where (`tme`.`createdDate` > `FN_PAST_DATE`(-(30))) group by `prj`.`projectID`,`prj`.`projectName`,`prj`.`projectID`,`uorg2`.`userID` order by `column4`,`projectName`,`column2` limit 40;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_user_detail_sidebar` AS select 'Created:' AS `description`,date_format(from_unixtime(`usr`.`created_on`),'%d %b %Y') AS `column2`,'' AS `id`,0 AS `column4`,`usr`.`id` AS `userID` from `users` `usr` union select 'Last login:' AS `description`,date_format(from_unixtime(`usr`.`last_login`),'%d %b %Y') AS `column2`,'' AS `id`,3 AS `column4`,`usr`.`id` AS `userID` from `users` `usr` order by `column4` limit 40;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `vw_select_user_index_sidebar` AS select 'New users' AS `userName`,'' AS `column2`,'' AS `id`,0 AS `column4`,'' AS `userID` union select distinct `usr`.`username` AS `username`,date_format(from_unixtime(`usr`.`created_on`),'%d %b %Y') AS `created_on`,`usr`.`id` AS `id`,3 AS `3`,`uorg2`.`userID` AS `userID` from ((`users` `usr` join `userorganisation` `uorg` on((`usr`.`id` = `uorg`.`userID`))) join `userorganisation` `uorg2` on((`uorg`.`organisationID` = `uorg2`.`organisationID`))) where (`usr`.`created_on` > `FN_PAST_DATE`(-(90))) union select 'Changed users' AS `Changed users`,'' AS `column2`,'' AS `id`,5 AS `5`,'' AS `userID` order by `column4`,`userName`,`column2`;
